<!DOCTYPE HTML>
<html lang="null">
<head>
    <!--Setting-->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta http-equiv="Cache-Control" content="no-siteapp">
    <meta http-equiv="Cache-Control" content="no-transform">
    <meta name="renderer" content="webkit|ie-comp|ie-stand">
    <meta name="apple-mobile-web-app-capable" content="五年C++程序员的口水博客">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="format-detection" content="telephone=no,email=no,adress=no">
    <meta name="browsermode" content="application">
    <meta name="screen-orientation" content="portrait">
    <link rel="dns-prefetch" href="https://israel-liu.github.io">
    <!--SEO-->





<meta name="robots" content="all" />
<meta name="google" content="all" />
<meta name="googlebot" content="all" />
<meta name="verify" content="all" />
    <!--Title-->


<title>C++ Primer, Fifth Edition reading-note-two | 五年C++程序员的口水博客</title>


    <link rel="alternate" href="/atom.xml" title="五年C++程序员的口水博客" type="application/atom+xml">


    <link rel="icon" href="/favicon.ico">

    



<link rel="stylesheet" href="/css/bootstrap.min.css?rev=3.3.7">
<link rel="stylesheet" href="/css/font-awesome.min.css?rev=4.5.0">
<link rel="stylesheet" href="/css/style.css?rev=@@hash">




    
	<div class="hide">
		<script type="text/javascript">
			var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan class='cnzz_stat_icon_1263868967 hide' %3E%3Cscript%20src%3D%22https%3A%2F%2Fs95.cnzz.com%2Fz_stat.php%3Fweb_id%3D1272564536%22%3E%3C%2Fscript%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s19.cnzz.com/z_stat.php%3Fid%3D1263868967%26show%3Dpic1' type='text/javascript'%3E%3C/script%3E"));
		</script>
	</div>






    
</head>


<!--[if lte IE 8]>
<style>
    html{ font-size: 1em }
</style>
<![endif]-->
<!--[if lte IE 9]>
<div style="ie">你使用的浏览器版本过低，为了你更好的阅读体验，请更新浏览器的版本或者使用其他现代浏览器，比如Chrome、Firefox、Safari等。</div>
<![endif]-->

<body>
    <header class="main-header"  style="background-image:url(https://github.com/israel-Liu/theForger/raw/master/images/byosoku.jpg)"  >
    <div class="main-header-box">
        <a class="header-avatar" href="/" title='Licca Chen'>
            <img src="/img/avatar.JPG" alt="logo头像" class="img-responsive center-block">
        </a>
        <div class="branding">
        	<!--<h2 class="text-hide">Snippet主题,从未如此简单有趣</h2>-->
            
                 <img src="/img/branding.png" alt="Snippet 博客主题" class="img-responsive center-block">
            
    	</div>
    </div>
</header>

    <nav class="main-navigation">
    <div class="container">
        <div class="row">
            <div class="col-sm-12">
                <div class="navbar-header"><span class="nav-toggle-button collapsed pull-right" data-toggle="collapse" data-target="#main-menu" id="mnav">
                    <span class="sr-only"></span>
                        <i class="fa fa-bars"></i>
                    </span>
                    <a class="navbar-brand" href="https://israel-liu.github.io">五年C++程序员的口水博客</a>
                </div>
                <div class="collapse navbar-collapse" id="main-menu">
                    <ul class="menu">
                        
                            <li role="presentation" class="text-center">
                                <a href="/"><i class="fa "></i>Home</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/archives/"><i class="fa "></i>timeline</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/tags/"><i class="fa "></i>Tags</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/about/"><i class="fa "></i>About</a>
                            </li>
                        
                    </ul>
                </div>
            </div>
        </div>
    </div>
</nav>
    <section class="content-wrap">
        <div class="container">
            <div class="row">
                <main class="col-md-8 main-content m-post">
                    <p id="process"></p>
<article class="post">
    <div class="post-head">
        <h1 id="C++ Primer, Fifth Edition reading-note-two">
            
	            C++ Primer, Fifth Edition reading-note-two
            
        </h1>
        <div class="post-meta">
    
    
    <span class="categories-meta fa-wrap">
        <i class="fa fa-folder-open-o"></i>
        <a href="/categories/ ">
             
        </a>
    </span>
    
    
    <span class="fa-wrap">
        <i class="fa fa-tags"></i>
        <span class="tags-meta">
            
                
            
        </span>
    </span>
    

    
        
        <span class="fa-wrap">
            <i class="fa fa-clock-o"></i>
            <span class="date-meta">2016/12/02</span>
        </span>
    
</div>

            
            
    </div>
    
    <div class="post-body post-content">
        <p>先写个概要内容</p>
<p>##正文开始</p>
<h3 id="范围for循环，前-后-，auto"><a href="#范围for循环，前-后-，auto" class="headerlink" title="范围for循环，前++后++，auto"></a>范围for循环，前++后++，auto</h3><p>The auto specifier was only allowed for objects declared at block scope or in function parameter lists. It indicated automatic storage duration, which is the default for these kinds of declarations. </p>
<h2 id="Part-III-Tools-for-Class-Authors"><a href="#Part-III-Tools-for-Class-Authors" class="headerlink" title="Part III: Tools for Class Authors"></a>Part III: Tools for Class Authors</h2><h3 id="Chapter-13-Copy-Control"><a href="#Chapter-13-Copy-Control" class="headerlink" title="Chapter 13. Copy Control"></a>Chapter 13. Copy Control</h3><h4 id="13-1-Copy-Assign-and-Destroy"><a href="#13-1-Copy-Assign-and-Destroy" class="headerlink" title="13.1. Copy, Assign, and Destroy"></a>13.1. Copy, Assign, and Destroy</h4><p>拷贝构造的赋值可以放到初始化列表中。(也就是说构造函数都有初始列表？),拷贝初始化和直接初始化(普通函数匹配规则)的不同。<br>Copy initialization happens not only when we define variables using an =, but also when we<br>    • Pass an object as an argument to a parameter of nonreference type<br>    • Return an object from a function that has a nonreference return type<br>    • Brace initialize the elements in an array or the members of an aggregate class</p>
<p>emplace 使用直接初始化。剩下很多都是拷贝初始化，比如 insert 和 push。不能隐式的使用显示构造，所有拷贝构造不能用显示构造的参数。<br>拷贝构造用来初始化非引用参数 explains why the copy constructor’s own parameter must be a reference，否则会无限循环。<br>使用 () 相比使用 = 创建对象(而不是赋值给一个已经有值的对象)，实际上是编译器选择省略了拷贝构造函数，直接创建对象。<br>When an operator is a member function, the left-hand operand is bound to the implicit this parameter (§ 7.1.2, p. 257).<br>The right-hand operand in a binary operator, such as assignment, is passed as an explicit parameter.</p>
<p>Because 析构函数 takes no parameters, it cannot be overloaded. There is always only one destructor for a given class。<br>在析构函数中，函数体先执行，可以在这里最后使用对象，做一些资源释放。然后析构成员，析构顺序和构造顺序相反。(智能指针式对象，调用对象析构函数)<br>The implicit destruction of a member of built-in pointer type(包括指向对象的指针) does not delete the object to which that pointer points.</p>
<pre><code>Elements in a container—whether a library container or an array—are destroyed when the container is destroyed.
Dynamically allocated objects are destroyed when the delete operator is applied to a pointer to the object (§ 12.1.2, p. 460).
Temporary objects are destroyed at the end of the full expression in which the temporary was created.
</code></pre><p>If a class needs a destructor, it almost surely also needs the copy-assignment operator and a copy constructor.(避免多个指针指向同一个对象，删除后还使用)<br>If we do not want the synthesized member to be an inline function, we can specify = default on the member’s definition.<br>we cannot define variables or members of such types, we can dynamically allocate objects with a deleted destructor. However, we cannot free them.</p>
<h4 id="13-2-Copy-Control-and-Resource-Management"><a href="#13-2-Copy-Control-and-Resource-Management" class="headerlink" title="13.2. Copy Control and Resource Management"></a>13.2. Copy Control and Resource Management</h4><p>What we do when we copy the pointer member determines whether a class like HasPtr has valuelike or pointerlike behavior.</p>
<h4 id="13-3-Swap"><a href="#13-3-Swap" class="headerlink" title="13.3. Swap"></a>13.3. Swap</h4><p>If there is a type-specific version of swap, calls to swap will match that typespecific version.<br>If there is no type-specific version, then—assuming there is a using declaration for swap in scope.</p>
<pre><code>// note rhs is passed by value, which means the HasPtr copy constructor
// copies the string in the right-hand operand into rhs
HasPtr&amp; HasPtr::operator=(HasPtr rhs)
{
    // swap the contents of the left-hand operand with the local variable rhs
    swap(*this, rhs); // rhs now points to the memory this object had used
    return *this; // rhs is destroyed, which deletes the pointer in rhs
}
</code></pre><h4 id="13-4-A-Copy-Control-Example"><a href="#13-4-A-Copy-Control-Example" class="headerlink" title="13.4. A Copy-Control Example"></a>13.4. A Copy-Control Example</h4><h4 id="13-5-Classes-That-Manage-Dynamic-Memory"><a href="#13-5-Classes-That-Manage-Dynamic-Memory" class="headerlink" title="13.5. Classes That Manage Dynamic Memory"></a>13.5. Classes That Manage Dynamic Memory</h4><h4 id="13-6-Moving-Objects"><a href="#13-6-Moving-Objects" class="headerlink" title="13.6. Moving Objects"></a>13.6. Moving Objects</h4><p>Generally speaking, an lvalue expression refers to an object’s identity whereas an rvalue expression refers to an object’s value.</p>
<pre><code>int &amp;&amp;rr1 = 42; // ok: literals are rvalues
int &amp;&amp;rr2 = rr1; // error: the expression rr1 is an lvalue!
</code></pre><p>难道是 Cpp 实习自定义类是靠库实现的吗，为啥 noexcept 是通知标准库不抛出异常，还是异常是靠库实现的，应该是我们使用标准库存放自定义对象。(语言超集的子集)。<br>Understanding why noexcept is needed can help deepen our understanding of how the library interacts with objects of the types we write.(给库调用了)<br>The compiler will synthesize a move constructor or a move-assignment operator only if the class doesn’t define any of its own copy-control members<br>and if every nonstatic data member of the class can be moved.定义了移动构造/赋值函数必须定义拷贝的，因为编译器会定义拷贝的为删除的。不会合成。</p>
<pre><code>class HasPtr {    // 很有趣的是，赋值运算符因为提供了拷贝和移动构造函数，而同时具备了拷贝和移动赋值操作符的功能。
    public:
        // added move constructor
        HasPtr(HasPtr &amp;&amp;p) noexcept : ps(p.ps), i(p.i) {p.ps = 0;}
        // assignment operator is both the move- and copy-assignment operator
        HasPtr&amp; operator=(HasPtr rhs)
        { swap(*this, rhs); return *this; }
};
</code></pre><p>The Rule of Three / Five，拷贝控制成员包括，copy constructor, copy-assignment operator, and destructor，控制对象拷贝，资源分配。move constructor and move-assignment operator。(3+2=5)<br>The reference qualifier can be either &amp; or &amp;&amp;, indicating that this may point to an rvalue or lvalue, respectively. (同时出现在声明和定义的地方。同时使用放 const 后)</p>
<pre><code>class Foo {
public:
    Foo sorted() &amp;&amp;;
    Foo sorted() const; // error: must have reference qualifier
    // Comp is type alias for the function type (see § 6.7 (p. 249))
    // that can be used to compare int values
    using Comp = bool(const int&amp;, const int&amp;);
    Foo sorted(Comp*); // ok: different parameter list
    Foo sorted(Comp*) const; // ok: neither version is reference qualified
};
</code></pre><h3 id="Chapter-14-Overloaded-Operations-and-Conversions"><a href="#Chapter-14-Overloaded-Operations-and-Conversions" class="headerlink" title="Chapter 14. Overloaded Operations and Conversions"></a>Chapter 14. Overloaded Operations and Conversions</h3><p>重载 I/O 应该是非成员函数，If these operators are members of any class, they would have to be members of istream or ostream. ？</p>
<pre><code>std::string&amp; operator*() const
{ 
    auto p = check(curr, &quot;dereference past end&quot;);
    return (*p)[curr]; // (*p) is the vector to which this object points
}
std::string* operator-&gt;() const
{ 
    // delegate the real work to the dereference operator
    return &amp; this-&gt;operator*();
}
</code></pre><p>The overloaded arrow operator must return either a pointer to a class type or an object of a class type that defines its own operator arrow。(无限箭头)</p>
<h3 id="Chapter-15-Object-Oriented-Programming"><a href="#Chapter-15-Object-Oriented-Programming" class="headerlink" title="Chapter 15. Object-Oriented Programming"></a>Chapter 15. Object-Oriented Programming</h3><p>A derived class may include the virtual keyword on these functions but is not required to do so.<br>The scope of a derived class is nested inside the scope of its base class.<br>If the base class has one or more virtual functions, we can use a dynamic_cast to request a conversion that is checked at run time. (运行时间可以优化)<br>Alternatively, in those cases when we know that the conversion from base to derived is safe, we can use a static_cast to override the compiler.<br>派生类的作用域嵌套在基类的作用域内，所以派生类可以使用基类成员，但是基类成员就不可以直接使用派生类成员了。<br>虚函数可以有默认实参，如果某次调用使用了默认实参，实参值由本次调用的静态类型决定。<br>可以为纯虚函数提供定义，但是函数体必须在类的外部。不能在声明 = 0 的地方提供 {};<br>派生类对象只初始化直接基类，在构造函数初始化列表中，调用基类构造函数。<br>只能通过对象访问受保护成员，而不是类。(就是访问自己对象中的基类子对象受保护部分)<br>当对一个调用查找时候，(不停的往基类查)当定位到函数是虚函数的时候，编译器产生的代码将在运行时确定倒底运行虚函数的那个版本。<br>构造函数或析构函数调用了某个虚函数 ，应该执行与构造函数或析构函数所属类型想对应的虚函数版本，也就是类内函数调用。(之类的不行)</p>
<h3 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h3><p>这一章，很多编译器规则还是比较难理解和记忆的，还是要不停的看理解。</p>
<h3 id="Chapter-16-Templates-and-Generic-Programming"><a href="#Chapter-16-Templates-and-Generic-Programming" class="headerlink" title="Chapter 16. Templates and Generic Programming"></a>Chapter 16. Templates and Generic Programming</h3><p><a href="https://israel-liu.github.io/2018/04/10/reading-note-fourth/">reading-note-fourth</a></p>

    </div>

    <div class="post-footer">
        <div>
            
                转载声明：商业转载请联系作者获得授权,非商业转载请注明出处 © <a href="" target="_blank">theForger</a>
            
        </div>
        <div>
            
        </div>
    </div>
</article>

<div class="article-nav prev-next-wrap clearfix">
    
        <a href="/2016/12/02/markdown-help/" class="pre-post btn btn-default" title='markdown-help'>
            <i class="fa fa-angle-left fa-fw"></i><span class="hidden-lg">上一篇</span>
            <span class="hidden-xs">markdown-help</span>
        </a>
    
    
        <a href="/2016/12/01/reading-note-one/" class="next-post btn btn-default" title='C++ Primer, Fifth Edition reading_note_one'>
            <span class="hidden-lg">下一篇</span>
            <span class="hidden-xs">C++ Primer, Fifth Edition reading_note_one</span><i class="fa fa-angle-right fa-fw"></i>
        </a>
    
</div>


    <div id="comments">
        
	
  <script id="dsq-count-scr" src="https://israel-liu.disqus.com/count.js" async></script>


<script type="text/javascript">
  var disqus_config = function () {
    this.page.url = 'https://israel-liu.github.io/2016/12/02/reading-note-two/';
    this.page.identifier = '2016/12/02/reading-note-two/';
    this.page.title = 'C++ Primer, Fifth Edition reading-note-two';
  };
  var d = document, s = d.createElement('script');
  s.src = 'https://israel-liu.disqus.com/embed.js';
  s.setAttribute('data-timestamp', '' + +new Date());
  (d.head || d.body).appendChild(s);
</script>


	

    </div>





                </main>
                
                    <aside id="article-toc" role="navigation" class="col-md-4">
    <div class="widget">
        <h3 class="title">文章目录</h3>
        <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#范围for循环，前-后-，auto"><span class="toc-text">范围for循环，前++后++，auto</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Part-III-Tools-for-Class-Authors"><span class="toc-text">Part III: Tools for Class Authors</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Chapter-13-Copy-Control"><span class="toc-text">Chapter 13. Copy Control</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#13-1-Copy-Assign-and-Destroy"><span class="toc-text">13.1. Copy, Assign, and Destroy</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#13-2-Copy-Control-and-Resource-Management"><span class="toc-text">13.2. Copy Control and Resource Management</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#13-3-Swap"><span class="toc-text">13.3. Swap</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#13-4-A-Copy-Control-Example"><span class="toc-text">13.4. A Copy-Control Example</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#13-5-Classes-That-Manage-Dynamic-Memory"><span class="toc-text">13.5. Classes That Manage Dynamic Memory</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#13-6-Moving-Objects"><span class="toc-text">13.6. Moving Objects</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Chapter-14-Overloaded-Operations-and-Conversions"><span class="toc-text">Chapter 14. Overloaded Operations and Conversions</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Chapter-15-Object-Oriented-Programming"><span class="toc-text">Chapter 15. Object-Oriented Programming</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Summary"><span class="toc-text">Summary</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Chapter-16-Templates-and-Generic-Programming"><span class="toc-text">Chapter 16. Templates and Generic Programming</span></a></li></ol>
    </div>
</aside>

                
            </div>
        </div>
    </section>
    <footer class="main-footer">
    <div class="container">
        <div class="row">
        </div>
    </div>
</footer>

<!--<a id="toc-btn">
    <i class="fa fa-bars"></i>
</a>-->

<a id="back-to-top" class="icon-btn hide">
	<i class="fa fa-chevron-up"></i>
</a>




    <div class="copyright">
    <div class="container">
        <div class="row">
            <div class="col-sm-12"> 
                <span>Copyright &copy; 2017
                </span> | 
                <span>
                    Powered by <a href="//hexo.io" class="copyright-links" target="_blank" rel="nofollow">Hexo</a>
                </span> | 
                <span>
                    Theme by <a href="//github.com/shenliyang/hexo-theme-snippet.git" class="copyright-links" target="_blank" rel="nofollow">Snippet</a>
                </span>
            </div>
        </div>
    </div>
</div>



	<script src="/js/search.js?rev=@@hash"></script>


<script src="/js/app.js?rev=@@hash"></script>


</body>
</html>