<!DOCTYPE HTML>
<html lang="null">
<head>
    <!--Setting-->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta http-equiv="Cache-Control" content="no-siteapp">
    <meta http-equiv="Cache-Control" content="no-transform">
    <meta name="renderer" content="webkit|ie-comp|ie-stand">
    <meta name="apple-mobile-web-app-capable" content="五年C++程序员的口水博客">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="format-detection" content="telephone=no,email=no,adress=no">
    <meta name="browsermode" content="application">
    <meta name="screen-orientation" content="portrait">
    <link rel="dns-prefetch" href="https://israel-liu.github.io">
    <!--SEO-->





<meta name="robots" content="all" />
<meta name="google" content="all" />
<meta name="googlebot" content="all" />
<meta name="verify" content="all" />
    <!--Title-->


<title>The Design And Evolution Of Cpp | 五年C++程序员的口水博客</title>


    <link rel="alternate" href="/atom.xml" title="五年C++程序员的口水博客" type="application/atom+xml">


    <link rel="icon" href="/favicon.ico">

    



<link rel="stylesheet" href="/css/bootstrap.min.css?rev=3.3.7">
<link rel="stylesheet" href="/css/font-awesome.min.css?rev=4.5.0">
<link rel="stylesheet" href="/css/style.css?rev=@@hash">




    
	<div class="hide">
		<script type="text/javascript">
			var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan class='cnzz_stat_icon_1263868967 hide' %3E%3Cscript%20src%3D%22https%3A%2F%2Fs95.cnzz.com%2Fz_stat.php%3Fweb_id%3D1272564536%22%3E%3C%2Fscript%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s19.cnzz.com/z_stat.php%3Fid%3D1263868967%26show%3Dpic1' type='text/javascript'%3E%3C/script%3E"));
		</script>
	</div>






    
</head>


<!--[if lte IE 8]>
<style>
    html{ font-size: 1em }
</style>
<![endif]-->
<!--[if lte IE 9]>
<div style="ie">你使用的浏览器版本过低，为了你更好的阅读体验，请更新浏览器的版本或者使用其他现代浏览器，比如Chrome、Firefox、Safari等。</div>
<![endif]-->

<body>
    <header class="main-header"  style="background-image:url(https://github.com/israel-Liu/theForger/raw/master/images/byosoku.jpg)"  >
    <div class="main-header-box">
        <a class="header-avatar" href="/" title='Licca Chen'>
            <img src="/img/avatar.JPG" alt="logo头像" class="img-responsive center-block">
        </a>
        <div class="branding">
        	<!--<h2 class="text-hide">Snippet主题,从未如此简单有趣</h2>-->
            
                 <img src="/img/branding.png" alt="Snippet 博客主题" class="img-responsive center-block">
            
    	</div>
    </div>
</header>

    <nav class="main-navigation">
    <div class="container">
        <div class="row">
            <div class="col-sm-12">
                <div class="navbar-header"><span class="nav-toggle-button collapsed pull-right" data-toggle="collapse" data-target="#main-menu" id="mnav">
                    <span class="sr-only"></span>
                        <i class="fa fa-bars"></i>
                    </span>
                    <a class="navbar-brand" href="https://israel-liu.github.io">五年C++程序员的口水博客</a>
                </div>
                <div class="collapse navbar-collapse" id="main-menu">
                    <ul class="menu">
                        
                            <li role="presentation" class="text-center">
                                <a href="/"><i class="fa "></i>Home</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/archives/"><i class="fa "></i>timeline</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/tags/"><i class="fa "></i>Tags</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/about/"><i class="fa "></i>About</a>
                            </li>
                        
                    </ul>
                </div>
            </div>
        </div>
    </div>
</nav>
    <section class="content-wrap">
        <div class="container">
            <div class="row">
                <main class="col-md-8 main-content m-post">
                    <p id="process"></p>
<article class="post">
    <div class="post-head">
        <h1 id="The Design And Evolution Of Cpp">
            
	            The Design And Evolution Of Cpp
            
        </h1>
        <div class="post-meta">
    
    
    <span class="categories-meta fa-wrap">
        <i class="fa fa-folder-open-o"></i>
        <a href="/categories/ ">
             
        </a>
    </span>
    
    
    <span class="fa-wrap">
        <i class="fa fa-tags"></i>
        <span class="tags-meta">
            
                
            
        </span>
    </span>
    

    
        
        <span class="fa-wrap">
            <i class="fa fa-clock-o"></i>
            <span class="date-meta">2018/09/27</span>
        </span>
    
</div>

            
            
    </div>
    
    <div class="post-body post-content">
        <h3 id="豆瓣书评"><a href="#豆瓣书评" class="headerlink" title="豆瓣书评"></a><a href="https://book.douban.com/subject/1456860/" target="_blank" rel="noopener">豆瓣书评</a></h3><h2 id="0-Notes-to-the-Reader"><a href="#0-Notes-to-the-Reader" class="headerlink" title="0 Notes to the Reader"></a>0 Notes to the Reader</h2><h3 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h3><h3 id="How-to-Read-this-Book"><a href="#How-to-Read-this-Book" class="headerlink" title="How to Read this Book"></a>How to Read this Book</h3><p>In particular, no two people seem to agree on what level of detail is appropriate for a discussion of this topic.</p>
<h3 id="Focus-on-Use-and-Users"><a href="#Focus-on-Use-and-Users" class="headerlink" title="Focus on Use and Users"></a>Focus on Use and Users</h3><h3 id="Programming-Languages"><a href="#Programming-Languages" class="headerlink" title="Programming Languages"></a>Programming Languages</h3><p><a href="http://www.stroustrup.com/C++.html" target="_blank" rel="noopener">C++</a></p>
<h3 id="References"><a href="#References" class="headerlink" title="References"></a>References</h3><h1 id="Part-I-Chapters"><a href="#Part-I-Chapters" class="headerlink" title="Part I Chapters"></a>Part I Chapters</h1><h2 id="1-The-Prehistory-of-C"><a href="#1-The-Prehistory-of-C" class="headerlink" title="1 The Prehistory of C++"></a>1 The Prehistory of C++</h2><h3 id="1-1-Simula-and-Distributed-Systems"><a href="#1-1-Simula-and-Distributed-Systems" class="headerlink" title="1.1 Simula and Distributed Systems"></a>1.1 Simula and Distributed Systems</h3><p>支持类，高效，可移值。</p>
<h3 id="1-2-C-and-Systems-Programming"><a href="#1-2-C-and-Systems-Programming" class="headerlink" title="1.2 C and Systems Programming"></a>1.2 C and Systems Programming</h3><h3 id="1-3-General-Background"><a href="#1-3-General-Background" class="headerlink" title="1.3 General Background"></a>1.3 General Background</h3><p>哲学啊，是想啊，文学啊，数学啊，各自乱七八糟的东西，也就是说思想达到一定高度才有这种设计水平。</p>
<h2 id="2-C-with-Classes"><a href="#2-C-with-Classes" class="headerlink" title="2 C with Classes"></a>2 C with Classes</h2><h3 id="2-1-The-Birth-of-C-with-Classes"><a href="#2-1-The-Birth-of-C-with-Classes" class="headerlink" title="2.1 The Birth of C with Classes"></a>2.1 The Birth of C with Classes</h3><h3 id="2-2-Feature-overview"><a href="#2-2-Feature-overview" class="headerlink" title="2.2 Feature overview"></a>2.2 Feature overview</h3><h3 id="2-3-Classes"><a href="#2-3-Classes" class="headerlink" title="2.3 Classes"></a>2.3 Classes</h3><h3 id="2-4-Run-Time-Efficiency"><a href="#2-4-Run-Time-Efficiency" class="headerlink" title="2.4 Run-Time Efficiency"></a>2.4 Run-Time Efficiency</h3><h4 id="2-4-1-Inlining"><a href="#2-4-1-Inlining" class="headerlink" title="2.4.1 Inlining,"></a>2.4.1 Inlining,</h4><h3 id="2-5-The-Linkage-Model"><a href="#2-5-The-Linkage-Model" class="headerlink" title="2.5 The Linkage Model"></a>2.5 The Linkage Model</h3><h4 id="2-5-1-Simple-Minded-Implementations"><a href="#2-5-1-Simple-Minded-Implementations" class="headerlink" title="2.5.1 Simple-Minded Implementations"></a>2.5.1 Simple-Minded Implementations</h4><p>link compatibility is much more important than source compatibility.</p>
<h4 id="2-5-2-The-Object-Layout-Model"><a href="#2-5-2-The-Object-Layout-Model" class="headerlink" title="2.5.2 The Object Layout Model"></a>2.5.2 The Object Layout Model</h4><p>引入 this 的时候，C++ 还没有引用。所以 this 是指向对象的指针。</p>
<h3 id="2-6-Static-Type-Checking"><a href="#2-6-Static-Type-Checking" class="headerlink" title="2.6 Static Type Checking"></a>2.6 Static Type Checking</h3><h4 id="2-6-1-Narrowing-Conversions"><a href="#2-6-1-Narrowing-Conversions" class="headerlink" title="2.6.1 Narrowing Conversions"></a>2.6.1 Narrowing Conversions</h4><p>类型截断</p>
<h4 id="2-6-2-Use-of-Warnings"><a href="#2-6-2-Use-of-Warnings" class="headerlink" title="2.6.2 Use of Warnings"></a>2.6.2 Use of Warnings</h4><p>warnings are used to compensate for problems that cannot be fixed through language changes。</p>
<h3 id="2-7-Why-C"><a href="#2-7-Why-C" class="headerlink" title="2.7 Why C?"></a>2.7 Why C?</h3><h3 id="2-8-Syntax-Problems"><a href="#2-8-Syntax-Problems" class="headerlink" title="2.8 Syntax Problems"></a>2.8 Syntax Problems</h3><h4 id="2-8-1-The-C-Declaration-Syntax"><a href="#2-8-1-The-C-Declaration-Syntax" class="headerlink" title="2.8.1 The C Declaration Syntax"></a>2.8.1 The C Declaration Syntax</h4><h4 id="2-8-2-Structure-Tags-vs-Type-Names"><a href="#2-8-2-Structure-Tags-vs-Type-Names" class="headerlink" title="2.8.2 Structure Tags vs. Type Names"></a>2.8.2 Structure Tags vs. Type Names</h4><h4 id="2-8-3-The-Importance-of-Syntax"><a href="#2-8-3-The-Importance-of-Syntax" class="headerlink" title="2.8.3 The Importance of Syntax"></a>2.8.3 The Importance of Syntax</h4><p>However, the syntax of a language should be designed to follow the semantic notions of the language, not the other way around.</p>
<h3 id="2-9-Derived-Classes"><a href="#2-9-Derived-Classes" class="headerlink" title="2.9 Derived Classes"></a>2.9 Derived Classes</h3><p>这时候还没有虚函数，但是它仍然是有意义的。they allowed list and task classes to be defined。</p>
<h4 id="2-9-1-Polymorphism-without-Virtual-Functions"><a href="#2-9-1-Polymorphism-without-Virtual-Functions" class="headerlink" title="2.9.1 Polymorphism without Virtual Functions"></a>2.9.1 Polymorphism without Virtual Functions</h4><p>使用域操作符直接调用基类。</p>
<h4 id="2-9-2-Container-Classes-Without-Templates"><a href="#2-9-2-Container-Classes-Without-Templates" class="headerlink" title="2.9.2 Container Classes Without Templates"></a>2.9.2 Container Classes Without Templates</h4><p>I soon defined a few “standard” token-pasting macros and recommended a stylized macro usage based on them for generic classes [Stroustrup,1986,§7.3.5].</p>
<h4 id="2-9-3-The-Object-Layout-Model"><a href="#2-9-3-The-Object-Layout-Model" class="headerlink" title="2.9.3 The Object Layout Model"></a>2.9.3 The Object Layout Model</h4><p>子类基类直接连接到一起，实际的内存分布可能是分开的。子对象的概念。</p>
<h4 id="2-9-4-Retrospective"><a href="#2-9-4-Retrospective" class="headerlink" title="2.9.4 Retrospective"></a>2.9.4 Retrospective</h4><p>引入虚函数？</p>
<h3 id="2-10-The-Protection-Model"><a href="#2-10-The-Protection-Model" class="headerlink" title="2.10 The Protection Model"></a>2.10 The Protection Model</h3><p>最开始 only classes could be friends，后面才有别的。</p>
<h3 id="2-11-Run-Time-Guarantees"><a href="#2-11-Run-Time-Guarantees" class="headerlink" title="2.11 Run-Time Guarantees"></a>2.11 Run-Time Guarantees</h3><h4 id="2-11-1-Constructors-and-Destructors"><a href="#2-11-1-Constructors-and-Destructors" class="headerlink" title="2.11.1 Constructors and Destructors"></a>2.11.1 Constructors and Destructors</h4><h4 id="2-11-2-Allocation-and-Constructors"><a href="#2-11-2-Allocation-and-Constructors" class="headerlink" title="2.11.2 Allocation and Constructors"></a>2.11.2 Allocation and Constructors</h4><h4 id="2-11-3-Call-and-Return-Functions"><a href="#2-11-3-Call-and-Return-Functions" class="headerlink" title="2.11.3 Call and Return Functions"></a>2.11.3 Call and Return Functions</h4><p>不存在于 C++ 中。</p>
<h3 id="2-12-Minor-Features"><a href="#2-12-Minor-Features" class="headerlink" title="2.12 Minor Features"></a>2.12 Minor Features</h3><h4 id="2-12-1-Overloading-of-Assignment"><a href="#2-12-1-Overloading-of-Assignment" class="headerlink" title="2.12.1 Overloading of Assignment"></a>2.12.1 Overloading of Assignment</h4><h4 id="2-12-2-Default-Arguments"><a href="#2-12-2-Default-Arguments" class="headerlink" title="2.12.2 Default Arguments"></a>2.12.2 Default Arguments</h4><p>However, C with Classes had default argument lists for years before general overloading became available in C++.</p>
<h3 id="2-13-Features-Considered-but-not-Provided"><a href="#2-13-Features-Considered-but-not-Provided" class="headerlink" title="2.13 Features Considered, but not Provided"></a>2.13 Features Considered, but not Provided</h3><p>虚函数后来应用了，垃圾回收没用，并发性变成通过库实现，而不是语言。</p>
<h3 id="2-14-Work-Environment"><a href="#2-14-Work-Environment" class="headerlink" title="2.14 Work Environment"></a>2.14 Work Environment</h3><h2 id="3-The-Birth-of-C"><a href="#3-The-Birth-of-C" class="headerlink" title="3 The Birth of C++"></a>3 The Birth of C++</h2><h3 id="3-1-From-C-with-Classes-to-C"><a href="#3-1-From-C-with-Classes-to-C" class="headerlink" title="3.1 From C with Classes to C++"></a>3.1 From C with Classes to C++</h3><p>The name C++ was suggested by Rick Mascitti.</p>
<h3 id="3-2-Aims"><a href="#3-2-Aims" class="headerlink" title="3.2 Aims"></a>3.2 Aims</h3><h3 id="3-3-Cfront"><a href="#3-3-Cfront" class="headerlink" title="3.3 Cfront"></a>3.3 Cfront</h3><p>编译器前端，后端是 C 编译器。 Cpp -&gt; Cfront -&gt; Cc -&gt; ObjectCode</p>
<h4 id="3-3-1-Generating-C"><a href="#3-3-1-Generating-C" class="headerlink" title="3.3.1 Generating C"></a>3.3.1 Generating C</h4><h4 id="3-3-2-Parsing-C"><a href="#3-3-2-Parsing-C" class="headerlink" title="3.3.2 Parsing C++"></a>3.3.2 Parsing C++</h4><p>解析器</p>
<h4 id="3-3-3-Linkage-Problems"><a href="#3-3-3-Linkage-Problems" class="headerlink" title="3.3.3 Linkage Problems"></a>3.3.3 Linkage Problems</h4><h4 id="3-3-4-Cfront-Releases"><a href="#3-3-4-Cfront-Releases" class="headerlink" title="3.3.4 Cfront Releases"></a>3.3.4 Cfront Releases</h4><p>1.0(The C+ + Programming Language), 2.0(The Annotated C++ Reference), 3.0(templates, exception handling)</p>
<h3 id="3-4-Language-Features"><a href="#3-4-Language-Features" class="headerlink" title="3.4 Language Features"></a>3.4 Language Features</h3><h3 id="3-5-Virtual-Functions"><a href="#3-5-Virtual-Functions" class="headerlink" title="3.5 Virtual Functions"></a>3.5 Virtual Functions</h3><p>“The Simula67 INSPECT statement was deliberately not introduced into C++.<br>The reason for that is to encourage modularity through the use of virtual functions[Stroustrup,1986].”</p>
<h4 id="3-5-1-The-Object-Layout-Model"><a href="#3-5-1-The-Object-Layout-Model" class="headerlink" title="3.5.1 The Object Layout Model"></a>3.5.1 The Object Layout Model</h4><p>Each object of such a class contains a hidden pointer, often called the v p t r , to its class’s virtual function table.<br>Have a single concept: a single set of layout rules, a single set of lookup rules, a single set of resolution rules, etc.</p>
<h4 id="3-5-2-Overriding-and-Virtual-Function-Matching"><a href="#3-5-2-Overriding-and-Virtual-Function-Matching" class="headerlink" title="3.5.2 Overriding and Virtual Function Matching"></a>3.5.2 Overriding and Virtual Function Matching</h4><h4 id="3-5-3-Base-Member-Hiding"><a href="#3-5-3-Base-Member-Hiding" class="headerlink" title="3.5.3 Base Member Hiding"></a>3.5.3 Base Member Hiding</h4><h3 id="3-6-Overloading"><a href="#3-6-Overloading" class="headerlink" title="3.6 Overloading"></a>3.6 Overloading</h3><p>[Stroustrup, 1984b]</p>
<h4 id="3-6-1-Basic-Overloading"><a href="#3-6-1-Basic-Overloading" class="headerlink" title="3.6.1 Basic Overloading"></a>3.6.1 Basic Overloading</h4><p>隐式转换避免爆炸增长.</p>
<h4 id="3-6-2-Members-and-Friends"><a href="#3-6-2-Members-and-Friends" class="headerlink" title="3.6.2 Members and Friends"></a>3.6.2 Members and Friends</h4><p>I restricted operators [ ], (), and - &gt; to be members.</p>
<h4 id="3-6-3-Operator-Functions"><a href="#3-6-3-Operator-Functions" class="headerlink" title="3.6.3 Operator Functions"></a>3.6.3 Operator Functions</h4><h4 id="3-6-4-Efficiency-and-Overloading"><a href="#3-6-4-Efficiency-and-Overloading" class="headerlink" title="3.6.4 Efficiency and Overloading"></a>3.6.4 Efficiency and Overloading</h4><p>Increasing run-time efficiency by eliminating temporaries, (+= 比 + 更高效)</p>
<h4 id="3-6-5-Mutation-and-New-Operators"><a href="#3-6-5-Mutation-and-New-Operators" class="headerlink" title="3.6.5 Mutation and New Operators"></a>3.6.5 Mutation and New Operators</h4><p>只可以重载现有内置操作符,而不是自己创建.而且有些内置的也不适合重载.</p>
<h3 id="3-7-References"><a href="#3-7-References" class="headerlink" title="3.7 References"></a>3.7 References</h3><p>References were introduced primarily to support operator overloading.</p>
<h4 id="3-7-1-Lvalue-vs-Rvalue"><a href="#3-7-1-Lvalue-vs-Rvalue" class="headerlink" title="3.7.1 Lvalue vs. Rvalue"></a>3.7.1 Lvalue vs. Rvalue</h4><pre><code>class char_ref { // identify a character in a String
friend class String;
    int i ;
    String* s;
    char_ref(String* ss, int ii) { s=ss; i=ii; }
public:
    void operator=(char c);
    operator char();
};
</code></pre><p>s l [ i ] = s 2 [ j ]; means s1.operator<a href="i"></a> = s2.operator<a href="j"></a> -&gt;  s1.operator<a href="i"></a>.operator=(s2.operator<a href="j"></a>.operator char())</p>
<h3 id="3-8-Constants"><a href="#3-8-Constants" class="headerlink" title="3.8 Constants"></a>3.8 Constants</h3><p>I had experimented further with c o n s t in C with Classes and found that c o n s t was a useful alternative to macros<br>for representing constants only if global c o n s t s were implicitly local to their compilation unit.(全局才是C宏的替换)</p>
<h3 id="3-9-Memory-Management"><a href="#3-9-Memory-Management" class="headerlink" title="3.9 Memory Management"></a>3.9 Memory Management</h3><p>By definition, t h i s points to the object for which a member function is called.(this = my_alloc(sizeof(X));)</p>
<h3 id="3-10-Type-Checking"><a href="#3-10-Type-Checking" class="headerlink" title="3.10 Type Checking"></a>3.10 Type Checking</h3><h3 id="3-11-Minor-Features"><a href="#3-11-Minor-Features" class="headerlink" title="3.11 Minor Features"></a>3.11 Minor Features</h3><h4 id="3-11-1-Comments"><a href="#3-11-1-Comments" class="headerlink" title="3.11.1 Comments"></a>3.11.1 Comments</h4><h4 id="3-11-2-Constructor-Notation"><a href="#3-11-2-Constructor-Notation" class="headerlink" title="3.11.2 Constructor Notation"></a>3.11.2 Constructor Notation</h4><p>The concept was extended to allow constructors to be used explicitly in expressions.</p>
<h4 id="3-11-3-Qualification"><a href="#3-11-3-Qualification" class="headerlink" title="3.11.3 Qualification"></a>3.11.3 Qualification</h4><p>To alleviate 混淆, : : was introduced to mean membership of class, and . was retained exclusively for membership of object.</p>
<h4 id="3-11-4-Initialization-of-Global-Objects"><a href="#3-11-4-Initialization-of-Global-Objects" class="headerlink" title="3.11.4 Initialization of Global Objects"></a>3.11.4 Initialization of Global Objects</h4><p>Dynamic initialization is done in declaration order within a translation unit.(不同单元没有顺序,static initialization 在 dynamic initialization 之前完成.)<br>全局对象调用构造函数,是动态初始化的,<a href="依赖其它对象先初始化">3.11.4.1 Problems with Dynamic Initialization</a><a href="???">3.11.4.2 Workarounds for Order Dependencies</a><br><a href="completely general expressions for the initialization of class objects">3.11.4.3 Dynamic Initialization of Built-in Types</a></p>
<h4 id="3-11-5-Declaration-Statements"><a href="#3-11-5-Declaration-Statements" class="headerlink" title="3.11.5 Declaration Statements"></a>3.11.5 Declaration Statements</h4><p>I enabled an “initialize-only” or “single-assignment” style of programming that is less error-prone than traditional styles.<br>[3.11.5.1 Declarations in for-statements][3.11.5.2 Declarations in Conditions]if (Tok* ct = gettok()) 这竟然是推荐写法.依赖动态初始化.</p>
<h3 id="3-12-Relationship-to-Classic-C"><a href="#3-12-Relationship-to-Classic-C" class="headerlink" title="3.12 Relationship to Classic C"></a>3.12 Relationship to Classic C</h3><p>C struct didn’t constitute a scope, nested class scopes were reintroduced into C++ in 1989.<br>没有文件级别的范围,所以出现了名字空间.</p>
<h3 id="3-13-Tools-for-Language-Design"><a href="#3-13-Tools-for-Language-Design" class="headerlink" title="3.13 Tools for Language Design"></a>3.13 Tools for Language Design</h3><h3 id="3-14-The-C-Programming-Language-1st-edition"><a href="#3-14-The-C-Programming-Language-1st-edition" class="headerlink" title="3.14 The C++ Programming Language (1st edition)"></a>3.14 The C++ Programming Language (1st edition)</h3><h3 id="3-15-The-Whatis-Paper"><a href="#3-15-The-Whatis-Paper" class="headerlink" title="3.15 The Whatis? Paper"></a>3.15 The Whatis? Paper</h3><h2 id="4-C-Language-Design-Rules"><a href="#4-C-Language-Design-Rules" class="headerlink" title="4 C++ Language Design Rules"></a>4 C++ Language Design Rules</h2><h3 id="4-1-Rules-and-Principles"><a href="#4-1-Rules-and-Principles" class="headerlink" title="4.1 Rules and Principles"></a>4.1 Rules and Principles</h3><p>The first contains overall ideals for the whole language.<br>The second set of rules primarily addresses C++’s role in supporting design.<br>The third addresses technicalities related to the form of the language.<br>The fourth focuses on C++’s role as a language for low-level systems programming.</p>
<h3 id="4-2-General-Rules"><a href="#4-2-General-Rules" class="headerlink" title="4.2 General Rules"></a>4.2 General Rules</h3><pre><code>C++&apos;s evolution must be driven by real problems.
Don&apos;t get involved in a sterile quest for perfection.
C++ must be useful now.
Every feature must have a reasonably obvious implementation.
Always provide a transition path.
C++ is a language, not a complete system.
Provide comprehensive support for each supported style.
Don&apos;t try to force people.
</code></pre><h3 id="4-3-Design-Support-Rules"><a href="#4-3-Design-Support-Rules" class="headerlink" title="4.3 Design Support Rules"></a>4.3 Design Support Rules</h3><pre><code>Support sound design notions.
Provide facilities for program organization.
Say what you mean.
All features must be affordable.
It is more important to allow a useful feature than to prevent every misuse.
Support composition of software from separately developed parts.
</code></pre><h3 id="4-4-Language-Technical-Rules"><a href="#4-4-Language-Technical-Rules" class="headerlink" title="4.4 Language-Technical Rules"></a>4.4 Language-Technical Rules</h3><pre><code>No implicit violations of the static type system.
Provide as good support for user-defined types as for built-in types.
Locality is good.
Avoid order dependencies.
If in doubt, pick the variant of a feature that is easiest to teach.
Syntax matters (often in perverse ways).
Preprocessor usage should be eliminated.
</code></pre><h2 id="4-C-Language-Design-Rules-1"><a href="#4-C-Language-Design-Rules-1" class="headerlink" title="4 C++ Language Design Rules"></a>4 C++ Language Design Rules</h2><h2 id="5-Chronology-1985-1993"><a href="#5-Chronology-1985-1993" class="headerlink" title="5 Chronology 1985-1993"></a>5 Chronology 1985-1993</h2><h2 id="6-Standardization"><a href="#6-Standardization" class="headerlink" title="6 Standardization"></a>6 Standardization</h2><h2 id="7-Interest-and-Use"><a href="#7-Interest-and-Use" class="headerlink" title="7 Interest and Use"></a>7 Interest and Use</h2><h2 id="8-Libraries"><a href="#8-Libraries" class="headerlink" title="8 Libraries"></a>8 Libraries</h2><h2 id="9-Looking-Ahead"><a href="#9-Looking-Ahead" class="headerlink" title="9 Looking Ahead"></a>9 Looking Ahead</h2><h4 id="2-11-Run-Time-Guarantees-1"><a href="#2-11-Run-Time-Guarantees-1" class="headerlink" title="2.11 Run-Time Guarantees"></a>2.11 Run-Time Guarantees</h4>
    </div>

    <div class="post-footer">
        <div>
            
                转载声明：商业转载请联系作者获得授权,非商业转载请注明出处 © <a href="" target="_blank">theForger</a>
            
        </div>
        <div>
            
        </div>
    </div>
</article>

<div class="article-nav prev-next-wrap clearfix">
    
        <a href="/2018/09/29/Refactoring-ImprovingTheDesignOfExistiongCode/" class="pre-post btn btn-default" title='Refactoring_ImprovingTheDesignOfExistiongCode'>
            <i class="fa fa-angle-left fa-fw"></i><span class="hidden-lg">上一篇</span>
            <span class="hidden-xs">Refactoring_ImprovingTheDesignOfExistiongCode</span>
        </a>
    
    
        <a href="/2018/09/21/CppCoreGuidelines/" class="next-post btn btn-default" title='CppCoreGuidelines'>
            <span class="hidden-lg">下一篇</span>
            <span class="hidden-xs">CppCoreGuidelines</span><i class="fa fa-angle-right fa-fw"></i>
        </a>
    
</div>


    <div id="comments">
        
	
  <script id="dsq-count-scr" src="https://israel-liu.disqus.com/count.js" async></script>


<script type="text/javascript">
  var disqus_config = function () {
    this.page.url = 'https://israel-liu.github.io/2018/09/27/The-Design-And-Evolution-Of-Cpp/';
    this.page.identifier = '2018/09/27/The-Design-And-Evolution-Of-Cpp/';
    this.page.title = 'The Design And Evolution Of Cpp';
  };
  var d = document, s = d.createElement('script');
  s.src = 'https://israel-liu.disqus.com/embed.js';
  s.setAttribute('data-timestamp', '' + +new Date());
  (d.head || d.body).appendChild(s);
</script>


	

    </div>





                </main>
                
                    <aside id="article-toc" role="navigation" class="col-md-4">
    <div class="widget">
        <h3 class="title">文章目录</h3>
        <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#豆瓣书评"><span class="toc-text">豆瓣书评</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#0-Notes-to-the-Reader"><span class="toc-text">0 Notes to the Reader</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Introduction"><span class="toc-text">Introduction</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#How-to-Read-this-Book"><span class="toc-text">How to Read this Book</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Focus-on-Use-and-Users"><span class="toc-text">Focus on Use and Users</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Programming-Languages"><span class="toc-text">Programming Languages</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#References"><span class="toc-text">References</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Part-I-Chapters"><span class="toc-text">Part I Chapters</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-The-Prehistory-of-C"><span class="toc-text">1 The Prehistory of C++</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-Simula-and-Distributed-Systems"><span class="toc-text">1.1 Simula and Distributed Systems</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-C-and-Systems-Programming"><span class="toc-text">1.2 C and Systems Programming</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-General-Background"><span class="toc-text">1.3 General Background</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-C-with-Classes"><span class="toc-text">2 C with Classes</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-The-Birth-of-C-with-Classes"><span class="toc-text">2.1 The Birth of C with Classes</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-Feature-overview"><span class="toc-text">2.2 Feature overview</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-Classes"><span class="toc-text">2.3 Classes</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4-Run-Time-Efficiency"><span class="toc-text">2.4 Run-Time Efficiency</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-4-1-Inlining"><span class="toc-text">2.4.1 Inlining,</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-5-The-Linkage-Model"><span class="toc-text">2.5 The Linkage Model</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-5-1-Simple-Minded-Implementations"><span class="toc-text">2.5.1 Simple-Minded Implementations</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-5-2-The-Object-Layout-Model"><span class="toc-text">2.5.2 The Object Layout Model</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-6-Static-Type-Checking"><span class="toc-text">2.6 Static Type Checking</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-6-1-Narrowing-Conversions"><span class="toc-text">2.6.1 Narrowing Conversions</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-6-2-Use-of-Warnings"><span class="toc-text">2.6.2 Use of Warnings</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-7-Why-C"><span class="toc-text">2.7 Why C?</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-8-Syntax-Problems"><span class="toc-text">2.8 Syntax Problems</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-8-1-The-C-Declaration-Syntax"><span class="toc-text">2.8.1 The C Declaration Syntax</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-8-2-Structure-Tags-vs-Type-Names"><span class="toc-text">2.8.2 Structure Tags vs. Type Names</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-8-3-The-Importance-of-Syntax"><span class="toc-text">2.8.3 The Importance of Syntax</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-9-Derived-Classes"><span class="toc-text">2.9 Derived Classes</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-9-1-Polymorphism-without-Virtual-Functions"><span class="toc-text">2.9.1 Polymorphism without Virtual Functions</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-9-2-Container-Classes-Without-Templates"><span class="toc-text">2.9.2 Container Classes Without Templates</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-9-3-The-Object-Layout-Model"><span class="toc-text">2.9.3 The Object Layout Model</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-9-4-Retrospective"><span class="toc-text">2.9.4 Retrospective</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-10-The-Protection-Model"><span class="toc-text">2.10 The Protection Model</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-11-Run-Time-Guarantees"><span class="toc-text">2.11 Run-Time Guarantees</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-11-1-Constructors-and-Destructors"><span class="toc-text">2.11.1 Constructors and Destructors</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-11-2-Allocation-and-Constructors"><span class="toc-text">2.11.2 Allocation and Constructors</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-11-3-Call-and-Return-Functions"><span class="toc-text">2.11.3 Call and Return Functions</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-12-Minor-Features"><span class="toc-text">2.12 Minor Features</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-12-1-Overloading-of-Assignment"><span class="toc-text">2.12.1 Overloading of Assignment</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-12-2-Default-Arguments"><span class="toc-text">2.12.2 Default Arguments</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-13-Features-Considered-but-not-Provided"><span class="toc-text">2.13 Features Considered, but not Provided</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-14-Work-Environment"><span class="toc-text">2.14 Work Environment</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-The-Birth-of-C"><span class="toc-text">3 The Birth of C++</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-From-C-with-Classes-to-C"><span class="toc-text">3.1 From C with Classes to C++</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-Aims"><span class="toc-text">3.2 Aims</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-Cfront"><span class="toc-text">3.3 Cfront</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-3-1-Generating-C"><span class="toc-text">3.3.1 Generating C</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-3-2-Parsing-C"><span class="toc-text">3.3.2 Parsing C++</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-3-3-Linkage-Problems"><span class="toc-text">3.3.3 Linkage Problems</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-3-4-Cfront-Releases"><span class="toc-text">3.3.4 Cfront Releases</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4-Language-Features"><span class="toc-text">3.4 Language Features</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-5-Virtual-Functions"><span class="toc-text">3.5 Virtual Functions</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-5-1-The-Object-Layout-Model"><span class="toc-text">3.5.1 The Object Layout Model</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-5-2-Overriding-and-Virtual-Function-Matching"><span class="toc-text">3.5.2 Overriding and Virtual Function Matching</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-5-3-Base-Member-Hiding"><span class="toc-text">3.5.3 Base Member Hiding</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-6-Overloading"><span class="toc-text">3.6 Overloading</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-6-1-Basic-Overloading"><span class="toc-text">3.6.1 Basic Overloading</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-6-2-Members-and-Friends"><span class="toc-text">3.6.2 Members and Friends</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-6-3-Operator-Functions"><span class="toc-text">3.6.3 Operator Functions</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-6-4-Efficiency-and-Overloading"><span class="toc-text">3.6.4 Efficiency and Overloading</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-6-5-Mutation-and-New-Operators"><span class="toc-text">3.6.5 Mutation and New Operators</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-7-References"><span class="toc-text">3.7 References</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-7-1-Lvalue-vs-Rvalue"><span class="toc-text">3.7.1 Lvalue vs. Rvalue</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-8-Constants"><span class="toc-text">3.8 Constants</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-9-Memory-Management"><span class="toc-text">3.9 Memory Management</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-10-Type-Checking"><span class="toc-text">3.10 Type Checking</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-11-Minor-Features"><span class="toc-text">3.11 Minor Features</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-11-1-Comments"><span class="toc-text">3.11.1 Comments</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-11-2-Constructor-Notation"><span class="toc-text">3.11.2 Constructor Notation</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-11-3-Qualification"><span class="toc-text">3.11.3 Qualification</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-11-4-Initialization-of-Global-Objects"><span class="toc-text">3.11.4 Initialization of Global Objects</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-11-5-Declaration-Statements"><span class="toc-text">3.11.5 Declaration Statements</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-12-Relationship-to-Classic-C"><span class="toc-text">3.12 Relationship to Classic C</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-13-Tools-for-Language-Design"><span class="toc-text">3.13 Tools for Language Design</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-14-The-C-Programming-Language-1st-edition"><span class="toc-text">3.14 The C++ Programming Language (1st edition)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-15-The-Whatis-Paper"><span class="toc-text">3.15 The Whatis? Paper</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-C-Language-Design-Rules"><span class="toc-text">4 C++ Language Design Rules</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-Rules-and-Principles"><span class="toc-text">4.1 Rules and Principles</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-General-Rules"><span class="toc-text">4.2 General Rules</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-Design-Support-Rules"><span class="toc-text">4.3 Design Support Rules</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-4-Language-Technical-Rules"><span class="toc-text">4.4 Language-Technical Rules</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-C-Language-Design-Rules-1"><span class="toc-text">4 C++ Language Design Rules</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-Chronology-1985-1993"><span class="toc-text">5 Chronology 1985-1993</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-Standardization"><span class="toc-text">6 Standardization</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-Interest-and-Use"><span class="toc-text">7 Interest and Use</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-Libraries"><span class="toc-text">8 Libraries</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-Looking-Ahead"><span class="toc-text">9 Looking Ahead</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-11-Run-Time-Guarantees-1"><span class="toc-text">2.11 Run-Time Guarantees</span></a></li></ol></li></ol>
    </div>
</aside>

                
            </div>
        </div>
    </section>
    <footer class="main-footer">
    <div class="container">
        <div class="row">
        </div>
    </div>
</footer>

<!--<a id="toc-btn">
    <i class="fa fa-bars"></i>
</a>-->

<a id="back-to-top" class="icon-btn hide">
	<i class="fa fa-chevron-up"></i>
</a>




    <div class="copyright">
    <div class="container">
        <div class="row">
            <div class="col-sm-12"> 
                <span>Copyright &copy; 2017
                </span> | 
                <span>
                    Powered by <a href="//hexo.io" class="copyright-links" target="_blank" rel="nofollow">Hexo</a>
                </span> | 
                <span>
                    Theme by <a href="//github.com/shenliyang/hexo-theme-snippet.git" class="copyright-links" target="_blank" rel="nofollow">Snippet</a>
                </span>
            </div>
        </div>
    </div>
</div>



	<script src="/js/search.js?rev=@@hash"></script>


<script src="/js/app.js?rev=@@hash"></script>


</body>
</html>