<!DOCTYPE HTML>
<html lang="null">
<head>
    <!--Setting-->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta http-equiv="Cache-Control" content="no-siteapp">
    <meta http-equiv="Cache-Control" content="no-transform">
    <meta name="renderer" content="webkit|ie-comp|ie-stand">
    <meta name="apple-mobile-web-app-capable" content="五年C++程序员的口水博客">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="format-detection" content="telephone=no,email=no,adress=no">
    <meta name="browsermode" content="application">
    <meta name="screen-orientation" content="portrait">
    <link rel="dns-prefetch" href="https://israel-liu.github.io">
    <!--SEO-->





<meta name="robots" content="all" />
<meta name="google" content="all" />
<meta name="googlebot" content="all" />
<meta name="verify" content="all" />
    <!--Title-->


<title>X86_Assembly | 五年C++程序员的口水博客</title>


    <link rel="alternate" href="/atom.xml" title="五年C++程序员的口水博客" type="application/atom+xml">


    <link rel="icon" href="/favicon.ico">

    



<link rel="stylesheet" href="/css/bootstrap.min.css?rev=3.3.7">
<link rel="stylesheet" href="/css/font-awesome.min.css?rev=4.5.0">
<link rel="stylesheet" href="/css/style.css?rev=@@hash">




    
	<div class="hide">
		<script type="text/javascript">
			var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan class='cnzz_stat_icon_1263868967 hide' %3E%3Cscript%20src%3D%22https%3A%2F%2Fs95.cnzz.com%2Fz_stat.php%3Fweb_id%3D1272564536%22%3E%3C%2Fscript%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s19.cnzz.com/z_stat.php%3Fid%3D1263868967%26show%3Dpic1' type='text/javascript'%3E%3C/script%3E"));
		</script>
	</div>






    
</head>


<!--[if lte IE 8]>
<style>
    html{ font-size: 1em }
</style>
<![endif]-->
<!--[if lte IE 9]>
<div style="ie">你使用的浏览器版本过低，为了你更好的阅读体验，请更新浏览器的版本或者使用其他现代浏览器，比如Chrome、Firefox、Safari等。</div>
<![endif]-->

<body>
    <header class="main-header"  style="background-image:url(https://github.com/israel-Liu/theForger/raw/master/images/byosoku.jpg)"  >
    <div class="main-header-box">
        <a class="header-avatar" href="/" title='Licca Chen'>
            <img src="/img/avatar.JPG" alt="logo头像" class="img-responsive center-block">
        </a>
        <div class="branding">
        	<!--<h2 class="text-hide">Snippet主题,从未如此简单有趣</h2>-->
            
                 <img src="/img/branding.png" alt="Snippet 博客主题" class="img-responsive center-block">
            
    	</div>
    </div>
</header>

    <nav class="main-navigation">
    <div class="container">
        <div class="row">
            <div class="col-sm-12">
                <div class="navbar-header"><span class="nav-toggle-button collapsed pull-right" data-toggle="collapse" data-target="#main-menu" id="mnav">
                    <span class="sr-only"></span>
                        <i class="fa fa-bars"></i>
                    </span>
                    <a class="navbar-brand" href="https://israel-liu.github.io">五年C++程序员的口水博客</a>
                </div>
                <div class="collapse navbar-collapse" id="main-menu">
                    <ul class="menu">
                        
                            <li role="presentation" class="text-center">
                                <a href="/"><i class="fa "></i>Home</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/archives/"><i class="fa "></i>timeline</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/tags/"><i class="fa "></i>Tags</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/about/"><i class="fa "></i>About</a>
                            </li>
                        
                    </ul>
                </div>
            </div>
        </div>
    </div>
</nav>

    <section class="content-wrap">
        <div class="container">
            <div class="row">
                <main class="col-md-8 main-content m-post">
                    <p id="process"></p>
<article class="post">
    <div class="post-head">
        <h1 id="X86_Assembly">
            
	            X86_Assembly
            
        </h1>
        <div class="post-meta">
    
    
    <span class="categories-meta fa-wrap">
        <i class="fa fa-folder-open-o"></i>
        <a href="/categories/ ">
             
        </a>
    </span>
    
    
    <span class="fa-wrap">
        <i class="fa fa-tags"></i>
        <span class="tags-meta">
            
                
            
        </span>
    </span>
    

    
        
        <span class="fa-wrap">
            <i class="fa fa-clock-o"></i>
            <span class="date-meta">2017/05/09</span>
        </span>
    
</div>

            
            
    </div>
    
    <div class="post-body post-content">
        <h4 id="4-1-5-Memory"><a href="#4-1-5-Memory" class="headerlink" title="4.1.5 Memory"></a>4.1.5 Memory</h4><p><img src="https://github.com/israel-Liu/theForger/raw/master/images/Little_Endian.png" alt="Little_Endian"></p>
<p><a href="https://docs.microsoft.com/en-us/cpp/assembler/masm/microsoft-macro-assembler-reference?view=vs-2019" target="_blank" rel="noopener">Microsoft Macro Assembler Reference</a></p>
<h2 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h2><p>Who want to learn assembly language on a given assembler only need to read the first section and the chapter in the second section。</p>
<h2 id="X86-Architecture"><a href="#X86-Architecture" class="headerlink" title="X86 Architecture"></a>X86 Architecture</h2><ol>
<li>EAX : Accumulator register. Used in arithmetic operations.</li>
<li>ECX : Counter register. Used in shift/rotate instructions.</li>
<li>EDX : Data register. Used in arithmetic operations and I/O operations.</li>
<li>EBX : Base register. Used as a pointer to data (located in DS in segmented mode).</li>
<li>ESP : Stack Pointer register. Pointer to the top of the stack.</li>
<li>EBP : Stack Base Pointer register. Used to point to the base of the stack.</li>
<li>ESI : Source register. Used as a pointer to a source in stream operations.</li>
<li>EDI : Destination register. Used as a pointer to a destination in stream operations.</li>
</ol>
<p>The 6 Segment Registers are:<br>• SS : Stack Segment. Pointer to the stack.<br>• CS : Code Segment. Pointer to the code.<br>• DS : Data Segment. Pointer to the data.<br>• ES : Extra Segment. Pointer to extra data. (‘E’ stands for “Extra”)<br>• FS : F Segment. Pointer to more extra data. (‘F’ comes after ‘E’)<br>• GS : G Segment. Pointer to still more extra data. (‘G’ comes after ‘F’)</p>
<p>The EFLAGS is a 32 bits register used as a vector to store and control the results of operations and the state of the processor.</p>
<p>The EIP register contains the address of the next instruction to be executed if no branching is done.<br>EIP can only be read through the stack after a call instruction。</p>
<h3 id="Stack"><a href="#Stack" class="headerlink" title="Stack"></a>Stack</h3><p>The Stack is usually used to pass arguments to functions or procedures and also to keep track of control flow when the call instruction is used.<br>The other common use of the Stack is temporarily saving registers.</p>
<h2 id="CPU-Operation-Modes"><a href="#CPU-Operation-Modes" class="headerlink" title="CPU Operation Modes"></a>CPU Operation Modes</h2><h2 id="Comments"><a href="#Comments" class="headerlink" title="Comments"></a>Comments</h2><p>; 后面同一行的是注释，也可以使用 HLA C / Cpp 方式注释。</p>
<h2 id="16-32-and-64-Bits"><a href="#16-32-and-64-Bits" class="headerlink" title="16 32 and 64 Bits"></a>16 32 and 64 Bits</h2><h3 id="32-Bit-Addressing"><a href="#32-Bit-Addressing" class="headerlink" title="32-Bit Addressing"></a>32-Bit Addressing</h3><p>“Flat addressing” scheme, where the address in the register directly points to a physical memory location.</p>
<h2 id="X86-Instructions"><a href="#X86-Instructions" class="headerlink" title="X86 Instructions"></a>X86 Instructions</h2><p>The movsb instruction copies one byte from the location specified in esi to the location specified in edi.<br>The movsw instruction copies one word (two bytes) from the location specified in esi to the location specified in edi.</p>
<h2 id="Control-Flow"><a href="#Control-Flow" class="headerlink" title="Control Flow"></a>Control Flow</h2><h3 id="Function-Calls"><a href="#Function-Calls" class="headerlink" title="Function Calls"></a>Function Calls</h3><p>call proc (pushes the value EIP+4 onto the top of the stack, and jumps to the specified location)</p>
<h2 id="Arithmetic"><a href="#Arithmetic" class="headerlink" title="Arithmetic"></a>Arithmetic</h2><h3 id="Shift-and-Rotate"><a href="#Shift-and-Rotate" class="headerlink" title="Shift and Rotate"></a>Shift and Rotate</h3><p>In a rotate instruction, the bits that slide off the end of the register are fed back into the spaces.</p>
<pre><code>ror arg
rotate to the right
rol arg
rotate to the left
</code></pre><h3 id="Other-Instructions"><a href="#Other-Instructions" class="headerlink" title="Other Instructions"></a>Other Instructions</h3><pre><code>sahf
Stores the content of AH register into the lower byte of the flag register.
lahf
Loads the AH register with the contents of the lower byte of the flag register.
</code></pre><h3 id="I-O-Instructions"><a href="#I-O-Instructions" class="headerlink" title="I/O Instructions"></a>I/O Instructions</h3><h3 id="System-Instructions"><a href="#System-Instructions" class="headerlink" title="System Instructions"></a>System Instructions</h3><pre><code>sysenter
This instruction causes the processor to enter protected system mode.
sysexit
This instruction causes the processor to leave protected system mode, and enter usermode.
</code></pre><h2 id="X86-Interrupts"><a href="#X86-Interrupts" class="headerlink" title="X86 Interrupts"></a>X86 Interrupts</h2><h2 id="Interrupt-Instruction"><a href="#Interrupt-Instruction" class="headerlink" title="Interrupt Instruction"></a>Interrupt Instruction</h2><p>int arg<br>This instruction calls the specified interrupt.</p>
<h3 id="Types-of-Interrupts"><a href="#Types-of-Interrupts" class="headerlink" title="Types of Interrupts"></a>Types of Interrupts</h3><p>There are 3 types of interrupts: Hardware Interrupts, Software Interrupts and Exceptions.</p>
<h2 id="x86-Assemblers"><a href="#x86-Assemblers" class="headerlink" title="x86 Assemblers"></a>x86 Assemblers</h2><h2 id="GAS-Syntax"><a href="#GAS-Syntax" class="headerlink" title="GAS Syntax"></a>GAS Syntax</h2><p>GCC 的后端 ，先跳过。</p>
<h2 id="MASM-Syntax"><a href="#MASM-Syntax" class="headerlink" title="MASM Syntax"></a>MASM Syntax</h2><p>应该要详细看下了。</p>
<h2 id="HLA-Syntax"><a href="#HLA-Syntax" class="headerlink" title="HLA Syntax"></a>HLA Syntax</h2><h2 id="FASM-Syntax"><a href="#FASM-Syntax" class="headerlink" title="FASM Syntax"></a>FASM Syntax</h2><h2 id="NASM-Syntax"><a href="#NASM-Syntax" class="headerlink" title="NASM Syntax"></a>NASM Syntax</h2><h2 id="Example-I-O-Linux"><a href="#Example-I-O-Linux" class="headerlink" title="Example I/O (Linux)"></a>Example I/O (Linux)</h2><h2 id="Floating-Point"><a href="#Floating-Point" class="headerlink" title="Floating Point"></a>Floating Point</h2><h2 id="MMX"><a href="#MMX" class="headerlink" title="MMX"></a>MMX</h2><h2 id="Advanced-x86"><a href="#Advanced-x86" class="headerlink" title="Advanced x86"></a>Advanced x86</h2>
    </div>

    <div class="post-footer">
        <div>
            
                转载声明：商业转载请联系作者获得授权,非商业转载请注明出处 © <a href="" target="_blank">theForger</a>
            
        </div>
        <div>
            
        </div>
    </div>
</article>

<div class="article-nav prev-next-wrap clearfix">
    
        <a href="/2017/05/19/Desktop-Window-Manager/" class="pre-post btn btn-default" title='Desktop Window Manager'>
            <i class="fa fa-angle-left fa-fw"></i><span class="hidden-lg">上一篇</span>
            <span class="hidden-xs">Desktop Window Manager</span>
        </a>
    
    
        <a href="/2017/02/22/Reversing-Microsoft-Visual-C-Part-II-Classes-Methods-and-RTTI/" class="next-post btn btn-default" title='Reversing Microsoft Visual C++ Part II: Classes, Methods and RTTI'>
            <span class="hidden-lg">下一篇</span>
            <span class="hidden-xs">Reversing Microsoft Visual C++ Part II: Classes, Methods and RTTI</span><i class="fa fa-angle-right fa-fw"></i>
        </a>
    
</div>


    <div id="comments">
        
	
  <script id="dsq-count-scr" src="https://israel-liu.disqus.com/count.js" async></script>


<script type="text/javascript">
  var disqus_config = function () {
    this.page.url = 'https://israel-liu.github.io/2017/05/09/X86-Assembly/';
    this.page.identifier = '2017/05/09/X86-Assembly/';
    this.page.title = 'X86_Assembly';
  };
  var d = document, s = d.createElement('script');
  s.src = 'https://israel-liu.disqus.com/embed.js';
  s.setAttribute('data-timestamp', '' + +new Date());
  (d.head || d.body).appendChild(s);
</script>


	

    </div>





                </main>
                
                    <aside id="article-toc" role="navigation" class="col-md-4">
    <div class="widget">
        <h3 class="title">文章目录</h3>
        <ol class="toc"><li class="toc-item toc-level-4"><a class="toc-link" href="#4-1-5-Memory"><span class="toc-text">4.1.5 Memory</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Introduction"><span class="toc-text">Introduction</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#X86-Architecture"><span class="toc-text">X86 Architecture</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Stack"><span class="toc-text">Stack</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#CPU-Operation-Modes"><span class="toc-text">CPU Operation Modes</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Comments"><span class="toc-text">Comments</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#16-32-and-64-Bits"><span class="toc-text">16 32 and 64 Bits</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#32-Bit-Addressing"><span class="toc-text">32-Bit Addressing</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#X86-Instructions"><span class="toc-text">X86 Instructions</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Control-Flow"><span class="toc-text">Control Flow</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Function-Calls"><span class="toc-text">Function Calls</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Arithmetic"><span class="toc-text">Arithmetic</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Shift-and-Rotate"><span class="toc-text">Shift and Rotate</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Other-Instructions"><span class="toc-text">Other Instructions</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#I-O-Instructions"><span class="toc-text">I/O Instructions</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#System-Instructions"><span class="toc-text">System Instructions</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#X86-Interrupts"><span class="toc-text">X86 Interrupts</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Interrupt-Instruction"><span class="toc-text">Interrupt Instruction</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Types-of-Interrupts"><span class="toc-text">Types of Interrupts</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#x86-Assemblers"><span class="toc-text">x86 Assemblers</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#GAS-Syntax"><span class="toc-text">GAS Syntax</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MASM-Syntax"><span class="toc-text">MASM Syntax</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#HLA-Syntax"><span class="toc-text">HLA Syntax</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#FASM-Syntax"><span class="toc-text">FASM Syntax</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#NASM-Syntax"><span class="toc-text">NASM Syntax</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Example-I-O-Linux"><span class="toc-text">Example I/O (Linux)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Floating-Point"><span class="toc-text">Floating Point</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MMX"><span class="toc-text">MMX</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Advanced-x86"><span class="toc-text">Advanced x86</span></a>
    </div>
</aside>

                
            </div>
        </div>
    </section>
    <footer class="main-footer">
    <div class="container">
        <div class="row">
        </div>
    </div>
</footer>

<!--<a id="toc-btn">
    <i class="fa fa-bars"></i>
</a>-->

<a id="back-to-top" class="icon-btn hide">
	<i class="fa fa-chevron-up"></i>
</a>




    <div class="copyright">
    <div class="container">
        <div class="row">
            <div class="col-sm-12"> 
                <span>Copyright &copy; 2017
                </span> | 
                <span>
                    Powered by <a href="//hexo.io" class="copyright-links" target="_blank" rel="nofollow">Hexo</a>
                </span> | 
                <span>
                    Theme by <a href="//github.com/shenliyang/hexo-theme-snippet.git" class="copyright-links" target="_blank" rel="nofollow">Snippet</a>
                </span>
            </div>
        </div>
    </div>
</div>



	<script src="/js/search.js?rev=@@hash"></script>


<script src="/js/app.js?rev=@@hash"></script>


</body>
</html>